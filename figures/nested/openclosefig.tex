%!TEX root = ../../Thesis.tex

\begin{figure}[t]
	\centering
\begin{tikzpicture}[->,>=stealth',roundnode/.style={circle,draw,inner sep=1.2pt},squarednode/.style={rectangle,inner sep=3pt}]
		\node [squarednode] (0) at (0.1, 0.2) {};
		\node [squarednode] (1) at (0.5, 1) {$p$};
		\node [squarednode] (2) at (1.9, 1) {$q$};
		%\node [squarednode] (3a) at (2.4, 2.7) {\scalebox{0.8}{$T^k_{p,{\tt x}, p'}$}};
		\node [squarednode] (3a) at (1.2, 2.7) {\scalebox{0.8}{$(p,\gamma, p') \in T_k$}};
		\node [squarednode] (3) at (2.4, 2) {$p'$};
%		\node [squarednode] (4a) at (3.6, 2.7) {\scalebox{0.8}{$S^k_{p'\!,q'}$}};
		\node [squarednode] (4a) at (3.2, 2.7) {\scalebox{0.8}{$(p'\!,q') \in  S_k$}};
		\node [squarednode, inner sep=1pt] (4) at (3.6, 2) {$q'$};
		
		\draw (0) to node[left] {{\footnotesize {\sf push}\! $\delta$}} (1);
		\draw (2) to node[left] {{\footnotesize {\sf push}\! $\gamma$}} (3);
		\tikzset{}
		\draw[-,decorate,decoration={snake,amplitude=.4mm,segment length=2mm,post length=0mm,pre length=0mm}] (1) to (2);
		\draw[-,decorate,decoration={snake,amplitude=.4mm,segment length=2mm,post length=0mm,pre length=0mm}] (3) to (4);
		
		\draw[-,gray] (3a) to (3);	
		\draw[-,gray] (4a) to (4);
		
		\draw[-,decorate,decoration={brace, amplitude=5}] (1.8,0.6) -- node[below=1mm] {\scalebox{0.7}{$\llevel(k)$}} (0.6,0.6) ;
		\draw[-,decorate,decoration={brace, amplitude=5}] (3.5,1.3) -- node[below=1mm] {\scalebox{0.7}{$\clevel(k)$}} (2.5,1.3) ;
		
		\draw[-,dashed] (4.2,0) -- (4.2,3);
		\node[color=white] (offset) at (0,-0.1) {.};

	\end{tikzpicture} \ \
\begin{tikzpicture}[->,>=stealth',roundnode/.style={circle,draw,inner sep=1.2pt},squarednode/.style={rectangle,inner sep=3pt}]
	\node [squarednode] (title) at (0.2,2.5) {{\em Open}:};
	\node [squarednode] (0) at (0.1, 0.2) {};
	\node [squarednode] (1) at (0.5, 1) {$p$};
	\node [squarednode] (2) at (1.8, 1) {$p$};
	\node [squarednode] (2p) at (1.95, 1.05) {$'$};
	\node [squarednode] (3) at (2.3, 2) {$q$};
	\draw (0) to node[left] {{\footnotesize {\sf push}\! $\delta$}} (1);
	\draw (2) to node[left] {{\footnotesize {\sf push}\! $\gamma$}} (3);
	\tikzset{decoration={snake,amplitude=.4mm,segment length=2mm,
			post length=0mm,pre length=0mm}}
	\draw[-,decorate] (1) to (2);
	\node[color=white] (offset) at (0,-0.15) {.};
\end{tikzpicture} \!\!\!\!\!\!
\begin{tikzpicture}[->,>=stealth',roundnode/.style={circle,draw,inner sep=1.2pt},squarednode/.style={rectangle,inner sep=3pt}]
	\node [squarednode] (title) at (0.2,2.5) {{\em Close}:};
	\node [squarednode] (0) at (0.1, 0.2) {};
	\node [squarednode] (1) at (0.5, 1) {$p$};
	\node [squarednode] (2) at (1.9, 1) {$\bigcirc$};
	\node [squarednode] (3) at (2.4, 2) {$p'$};
	\node [squarednode] (4) at (3.6, 2) {$q'$};
	\node [squarednode] (5) at (4.1, 1) {$q$};
	
	\draw (0) to node[left] {{\footnotesize {\sf push}\! $\delta$}} (1);
	\draw (2) to node[left] {{\footnotesize {\sf push}\! $\gamma$}} (3);
	\draw (4) to node[right] {{\footnotesize {\sf pop}\! $\gamma$}} (5);
	\tikzset{}
	\draw[-,decorate,decoration={snake,amplitude=.4mm,segment length=2mm,post length=0mm,pre length=0mm}] (1) to (2);
	\draw[-,decorate,decoration={snake,amplitude=.4mm,segment length=2mm,post length=0mm,pre length=0mm}] (3) to (4);
	\node[color=white] (offset) at (0,-0.2) {.};
\end{tikzpicture}
	\caption{Left: An example run of some \vpa $\cA$ at step $k$. Right: Illustration of two nondeterministic runs for some \vpa $\cA$, as considered in the determinization process.}
	\label{nested:fig:delta-schema}
	\vspace{-3mm}
\end{figure}

%%\draw[decorate,decoration={brace, amplitude=5}] (0,0) -- node[right=2mm] {texto que va al lado del brace} (0,3);


%%\draw[decorate,decoration={brace, amplitude=5, mirror}] (0,0) -- node[above=2mm] {texto que va al lado del brace} (3,0);
